<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>算命算命算命</title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			#shuru {
				width: 500px;
				height: 50px;
				position: absolute;
				left: 700px;
			}
			
			#btn {
				width: 80px;
				height: 50px;
				position: absolute;
				left: 1205px;
			}
		</style>
	</head>

	<body>

		<input type="text" name="" id="shuru" placeholder="请输入你的名字" /><input type="button" id="btn" value="提交" />
		<canvas id="canvas" width="640" height="734"></canvas>

	</body>
	<script type="text/javascript">
		var btn = document.getElementById("btn");
		btn.onclick = function() {
			//          ------------获取输入的文字和canvas联系上下文---------
			var text = document.getElementById("shuru").value;
			var canvas = document.getElementById("canvas");
			var ctx = canvas.getContext("2d");
			//			------------输入的文字写入到canvas---------
			ctx.fillStyle = 'black';
			ctx.textAlign = "center";
			ctx.textBaseline = "middle";
			ctx.font = "40px 微软雅黑";
			ctx.fillText(text, 200, 200);
			//			------------定位文字到图片之上--------
			ctx.globalCompositeOperation = "destination-atop";
			//			------------绘制背景图片---------
			var dataURL = canvas.toDataURL();
			var image = new Image();
			image.src = "img/ceshitu.jpg";

			image.onload = function() {
			//          ------------规定使用的图片及参数---------
				ctx.drawImage(image, 0, 0, 640, 734, 0, 0, 640, 734);
			//			------------图片质量高清无码---------
				var fullQuality = canvas.toDataURL("image/jpeg", 1.0);
				window.open(fullQuality);
			}

		}
	</script>

</html>